-- Attachments for cube
local cubeAttach0 = Instance.new("Attachment", cube)
cubeAttach0.Name = "Attachment0"
-- Offset the cube's attachment 3 studs backward on Z to push cube further behind tail tip
cubeAttach0.Position = Vector3.new(0, 0, -3)  -- 3 studs behind tail tip

-- Attach on tail tip segment
local tipAttach = Instance.new("Attachment", segments[#segments])
tipAttach.Name = "AttachmentTip"
tipAttach.Position = Vector3.new(0, 0, -LENGTH_PER_SEGMENT / 2)

-- Align constraints between cube and tail tip
local alignPosCube = Instance.new("AlignPosition")
alignPosCube.Attachment0 = cubeAttach0
alignPosCube.Attachment1 = tipAttach
alignPosCube.MaxForce = 10000
alignPosCube.Responsiveness = 50
alignPosCube.RigidityEnabled = false
alignPosCube.Parent = cube

local alignOriCube = Instance.new("AlignOrientation")
alignOriCube.Attachment0 = cubeAttach0
alignOriCube.Attachment1 = tipAttach
alignOriCube.MaxTorque = 10000
alignOriCube.Responsiveness = 50
alignOriCube.Parent = cube
