local RunService = game:GetService("RunService")

-- Assuming lastTailPart is your final tail segment
local lastTailPart = tailParts[#tailParts] -- Replace tailParts with your actual tail array/table name

local cube = Instance.new("Part")
cube.Size = Vector3.new(1, 1, 1)
cube.Shape = Enum.PartType.Block
cube.Color = Color3.new(1, 1, 1)
cube.Material = Enum.Material.Neon
cube.Anchored = false
cube.CanCollide = false
cube.Massless = true
cube.Name = "PastelCube"
cube.Parent = workspace

-- Offset from the tip (forward a bit)
local offset = Vector3.new(0, 0, -1.5)
local att0 = Instance.new("Attachment", lastTailPart)
local att1 = Instance.new("Attachment", cube)

-- Flexible joint with different wiggle
local alignPos = Instance.new("AlignPosition", cube)
alignPos.Attachment0 = att1
alignPos.Attachment1 = att0
alignPos.RigidityEnabled = false
alignPos.Responsiveness = 15
alignPos.MaxForce = math.huge
alignPos.ApplyAtCenterOfMass = true

local alignOri = Instance.new("AlignOrientation", cube)
alignOri.Attachment0 = att1
alignOri.Attachment1 = att0
alignOri.RigidityEnabled = false
alignOri.Responsiveness = 10
alignOri.MaxTorque = math.huge
alignOri.PrimaryAxisOnly = false

-- Offset attachment
att0.Position = offset

-- Spin
RunService.RenderStepped:Connect(function(dt)
	cube.Orientation = cube.Orientation + Vector3.new(0, 300 * dt, 0)
	
	-- Color shift
	local hue = tick() % 5 / 5
	cube.Color = Color3.fromHSV(hue, 0.6, 1)
end)
