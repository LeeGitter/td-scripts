-- Mythic Pavement Overwrite Script
-- Transforms parts by name or symbolic color/materialVariant/material, preserving transparency

local pavementNames = {
    ["pavement"] = true,
    ["texturedpart"] = true,
    ["sandstone"] = true,
    ["stone"] = true,
    ["terrain"] = true,
    ["floor"] = true,
    ["wall"] = true,
    ["stairs"] = true,
    ["block"] = true,
    ["steelwedge"] = true,
    ["metalwedge"] = true,
    ["metal"] = true,
    ["metaltile"] = true,
    ["steelplate"] = true,
    ["steelplatewedge"] = true,
    ["metaltilefloor"] = true
}

local indexedColor = Color3.fromRGB(123, 25, 153)
local compoundColor = Color3.fromRGB(147, 184, 131)
local compoundVariant = "steelPlate"

local dualTriggers = {
    { color = Color3.fromRGB(91, 93, 105), variant = "metalGrid" },
    { color = Color3.fromRGB(248, 248, 248), variant = "metalGrid" },
    { color = Color3.fromRGB(163, 162, 165), variant = "metalGrid" },
    { color = Color3.fromRGB(248, 248, 248), variant = "metalFloor" }
}

local groundTrigger = {
    color = Color3.fromRGB(226, 155, 64),
    material = Enum.Material.Ground
}

local pavementSettings = {
    BrickColor = BrickColor.new("Institutional white"),
    Color = Color3.fromRGB(248, 248, 248),
    Material = Enum.Material.Slate,
    MaterialVariant = "ghzStone",
    CastShadow = true,
    Reflectance = 0
    -- Transparency intentionally excluded
}

local function matchesSymbolicTrigger(part)
    local nameMatch = pavementNames[string.lower(part.Name)] ~= nil
    local colorMatch = part.Color == indexedColor
    local compoundMatch = part.Color == compoundColor and part.MaterialVariant == compoundVariant

    local dualMatch = false
    for _, trigger in ipairs(dualTriggers) do
        if part.Color == trigger.color and part.MaterialVariant == trigger.variant then
            dualMatch = true
            break
        end
    end

    local groundMatch = part.Color == groundTrigger.color and part.Material == groundTrigger.material

    return nameMatch or colorMatch or compoundMatch or dualMatch or groundMatch
end

local function applyPavement(part)
    if not part:IsA("BasePart") then return end
    if not matchesSymbolicTrigger(part) then return end

    -- Remove symbolic clutter
    local wallDeco = part:FindFirstChild("wallDeco")
    if wallDeco then
        wallDeco:Destroy()
    end

    -- Apply mythic pavement settings (excluding transparency)
    for prop, value in pairs(pavementSettings) do
        part[prop] = value
    end
end

-- Apply to all parts in workspace
for _, obj in pairs(workspace:GetDescendants()) do
    applyPavement(obj)
end
